import{a as O}from"./chunk-YEA552Y6.js";import{a as z}from"./chunk-UP23QCYC.js";import{f as q,h as P,i as U}from"./chunk-O3WCHT2C.js";import{A as j,B as G,C as k,G as L,k as D,l as N,n as T,o as c,q as A,r as B,v as I,w as R,x as V,y as M}from"./chunk-P3IO33T2.js";import"./chunk-U3QUSVWF.js";import"./chunk-2SOGP6GP.js";import{f as S,h as w}from"./chunk-B5AEI34L.js";import{Aa as s,Ja as x,Pa as b,V as p,Xa as d,ab as v,ba as _,ca as y,fb as e,gb as i,hb as m,lb as h,mb as f,nb as F,wb as r}from"./chunk-S4YP6WBW.js";import{a as C,b as E,e as J}from"./chunk-C6Q5SG76.js";var l=J(L());function H(n,t){n&1&&(e(0,"h1",2),r(1,"MODIFICAR TRABAJADOR"),i())}function K(n,t){n&1&&(e(0,"h1",2),r(1,"NUEVO TRABAJADOR"),i())}function Q(n,t){if(n&1){let o=h();e(0,"p-button",22),f("onClick",function(){_(o);let u=F();return y(u.edit())}),i()}}function W(n,t){if(n&1){let o=h();e(0,"p-button",23),f("onClick",function(){_(o);let u=F();return y(u.save())}),i()}}var g=class n{#o=p(M);#i=p(S);#e=p(w);#t=p(z);editMode=!1;loading=!0;originalData;employeeForm=this.#o.group({cedula:["null",c.required],nombre:["",c.required],contacto:["null",c.required],direccion:["",c.required],fecha_nacimiento:["",c.required],porcentaje_servicio:["null",[c.required]]});ngOnInit(){this.#i.params.subscribe(t=>{if(t&&t.cedula){this.editMode=!0,this.originalData=t;let o=C({},t);o.fecha_nacimiento&&(o.fecha_nacimiento=new Date(o.fecha_nacimiento)),o.porcentaje_servicio&&(o.porcentaje_servicio=parseFloat(o.porcentaje_servicio)),this.employeeForm.patchValue(o)}else this.editMode=!1;this.loading=!1})}onSubmit(){this.employeeForm.valid?console.log(this.employeeForm.value):console.log("Form is invalid")}getFormValue(){return E(C({},this.employeeForm.value),{cedula:this.originalData?.cedula||this.employeeForm.value.cedula})}edit(){if(!this.employeeForm.valid){l.default.fire({title:"Formulario invalido",icon:"error",showConfirmButton:!1,timer:1500});return}this.#t.update(this.getFormValue()).subscribe({next:t=>{l.default.fire({title:"Empleado actualizado",icon:"success",showConfirmButton:!1,timer:1500}),this.#e.navigate(["/employees"])},error:t=>{l.default.fire({title:"Error al actualizar empleado",icon:"error",showConfirmButton:!1,timer:1500})}})}save(){if(!this.employeeForm.valid){l.default.fire({title:"Formulario invalido",icon:"error",showConfirmButton:!1,timer:1500});return}this.#t.save(this.getFormValue()).subscribe({next:t=>{l.default.fire({title:"Empleado guardado",icon:"success",showConfirmButton:!1,timer:1500}),this.#e.navigate(["/employees"])},error:t=>{l.default.fire({title:"Error al guardar empleado",icon:"error",showConfirmButton:!1,timer:1500})}})}cancel(){l.default.fire({title:"\xBFEsta seguro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#32cd32",cancelButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&(l.default.fire({showConfirmButton:!1,title:"Registro cancelado",icon:"success",timer:1500}),this.employeeForm.reset(),this.#e.navigate(["/employees"]))})}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=x({type:n,selectors:[["employee-form"]],decls:34,vars:6,consts:[[1,"flex","flex-col","justify-center","px-6","py-12","w-screen"],[1,"flex","items-center","justify-center"],[1,"text-white","text-4xl","font-bold","text-center"],[1,"mt-10","sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"space-y-6",3,"ngSubmit","formGroup"],["variant","in"],["id","cedula","autocomplete","off","formControlName","cedula",1,"w-full",3,"useGrouping","readonly"],["for","cedula"],["pInputText","","id","nombre","autocomplete","off","formControlName","nombre",1,"w-full"],["for","nombre"],["mode","decimal","inputId","contacto","autocomplete","off","formControlName","contacto",1,"w-full",3,"useGrouping"],["for","contacto"],["pInputText","","id","direccion","autocomplete","off","formControlName","direccion",1,"w-full"],["for","direccion"],["showIcon","","iconDisplay","input","formControlName","fecha_nacimiento"],["for","fechaNacimiento"],["id","porcentajeServicio","suffix","%","autocomplete","off","formControlName","porcentaje_servicio",1,"w-full"],["for","porcentajeServicio"],[1,"flex","justify-center","gap-4","mt-10"],["severity","success","label","EDITAR"],["severity","success","label","GUARDAR"],["severity","danger","label","CANCELAR",3,"onClick"],["severity","success","label","EDITAR",3,"onClick"],["severity","success","label","GUARDAR",3,"onClick"]],template:function(o,a){o&1&&(e(0,"div",0)(1,"div",1),b(2,H,2,0,"h1",2)(3,K,2,0,"h1",2),i(),e(4,"div",3)(5,"form",4),f("ngSubmit",function(){return a.onSubmit()}),e(6,"p-floatlabel",5),m(7,"p-inputnumber",6),e(8,"label",7),r(9,"C\xE9dula"),i()(),e(10,"p-floatlabel",5),m(11,"input",8),e(12,"label",9),r(13,"Nombre y Apellido"),i()(),e(14,"p-floatlabel",5),m(15,"p-inputnumber",10),e(16,"label",11),r(17,"Contacto"),i()(),e(18,"p-floatlabel",5),m(19,"input",12),e(20,"label",13),r(21,"Direcci\xF3n"),i()(),e(22,"p-floatlabel",5),m(23,"p-datepicker",14),e(24,"label",15),r(25,"Fecha de Nacimiento"),i()(),e(26,"p-floatlabel",5),m(27,"p-inputnumber",16),e(28,"label",17),r(29,"Porcentaje de Servicio"),i()(),e(30,"div",18),b(31,Q,1,0,"p-button",19)(32,W,1,0,"p-button",20),e(33,"p-button",21),f("onClick",function(){return a.cancel()}),i()()()()()),o&2&&(s(2),v(a.editMode?2:3),s(3),d("formGroup",a.employeeForm),s(2),d("useGrouping",!1)("readonly",a.editMode),s(8),d("useGrouping",!1),s(16),v(a.editMode?31:32))},dependencies:[j,I,T,A,B,R,V,O,k,G,q,N,D,U,P],encapsulation:2})};export{g as default};
